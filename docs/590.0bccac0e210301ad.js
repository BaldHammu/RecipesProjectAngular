"use strict";(self.webpackChunkRecipe=self.webpackChunkRecipe||[]).push([[590],{9590:(x,c,s)=>{s.r(c),s.d(c,{AuthModule:()=>A});var m=s(1382),l=s(605),i=s(9133),t=s(9619);let p=(()=>{class e{constructor(){this.fechar=new t.vpe}ngOnInit(){}clickFechar(){this.fechar.emit()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-alert"]],inputs:{mensagem:"mensagem"},outputs:{fechar:"fechar"},decls:7,vars:1,consts:[[1,"backdrop",3,"click"],[1,"alert-box"],[1,"alert-box-actions"],[1,"btn","btn-primary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return o.clickFechar()}),t.qZA(),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.clickFechar()}),t._uU(6,"Fechar"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(o.mensagem))},styles:[".backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.75);z-index:50}.alert-box[_ngcontent-%COMP%]{position:fixed;top:30vh;left:20vw;width:60vw;padding:16px;z-index:100;background-color:#fff;box-shadow:0 2px 8px #00000042}.alert-box-actions[_ngcontent-%COMP%]{text-align:right}"]}),e})(),u=(()=>{class e{constructor(n){this.viewContainerRef=n}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.s_b))},e.\u0275dir=t.lG2({type:e,selectors:[["","appPlaceholder",""]]}),e})();var d=s(2833),h=s(6019);let f=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-loading-spinner"]],decls:2,vars:0,consts:[[1,"lds-heart"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"div"),t.qZA())},styles:['.lds-heart[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px;transform:rotate(45deg);transform-origin:40px 40px}.lds-heart[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{top:32px;left:32px;position:absolute;width:32px;height:32px;background:#ffee04;animation:lds-heart 1.2s infinite cubic-bezier(.215,.61,.355,1)}.lds-heart[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after, .lds-heart[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{content:" ";position:absolute;display:block;width:32px;height:32px;background:#ffee04}.lds-heart[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:before{left:-24px;border-radius:50% 0 0 50%}.lds-heart[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{top:-24px;border-radius:50% 50% 0 0}@keyframes lds-heart{0%{transform:scale(.95)}5%{transform:scale(1.1)}39%{transform:scale(.85)}45%{transform:scale(1)}60%{transform:scale(.95)}to{transform:scale(.9)}}']}),e})();function g(e,r){1&e&&(t.TgZ(0,"div",5),t._UZ(1,"app-loading-spinner"),t.qZA())}function v(e,r){}function b(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"form",6),t.NdJ("ngSubmit",function(){return t.CHM(n),t.oxw().fullSend()}),t.TgZ(1,"div",7),t.TgZ(2,"label",8),t._uU(3,"E-mail"),t.qZA(),t._UZ(4,"input",9),t.qZA(),t.TgZ(5,"div",7),t.TgZ(6,"label",10),t._uU(7,"Senha"),t.qZA(),t._UZ(8,"input",11),t.qZA(),t.TgZ(9,"div"),t.TgZ(10,"button",12),t._uU(11),t.qZA(),t._uU(12," | "),t.TgZ(13,"button",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().mudaModo()}),t._uU(14),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("formGroup",n.authForm),t.xp6(10),t.Q6J("disabled",!n.authForm.valid),t.xp6(1),t.Oqu(n.modoLogin?"Entrar":"Registrar-se"),t.xp6(3),t.hij("Trocar para ",n.modoLogin?"Registro.":"login.","")}}const C=[{path:"",component:(()=>{class e{constructor(n,o,a){this.auth=n,this.router=o,this.ComponentFactoryResolver=a,this.erro=null,this.modoLogin=!0,this.isLoading=!1}mudaModo(){this.modoLogin=!this.modoLogin}ngOnInit(){this.authForm=new i.cw({email:new i.NI(null,[i.kI.required,i.kI.email]),senha:new i.NI(null,[i.kI.required,i.kI.minLength(6)])})}fechaErro(){this.erro=null,console.log(this.erro)}fullSend(){let n;!this.authForm.valid||(this.isLoading=!0,n=this.modoLogin?this.auth.login(this.authForm.value.email,this.authForm.value.senha):this.auth.signup(this.authForm.value.email,this.authForm.value.senha),n.subscribe(o=>{console.log(o),this.isLoading=!1,this.router.navigate(["./receitas"])},o=>{this.erro=o.error.error.message,this.showErrorAlert(o.error.error.message),this.isLoading=!1}),this.authForm.reset())}showErrorAlert(n){const o=this.alertHost.viewContainerRef;o.clear();const a=o.createComponent(p);a.instance.mensagem=n,this.newSub=a.instance.fechar.subscribe(()=>{o.clear()})}ngOnDestroy(){this.newSub&&this.newSub.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.e),t.Y36(l.F0),t.Y36(t._Vd))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auth"]],viewQuery:function(n,o){if(1&n&&t.Gf(u,5),2&n){let a;t.iGM(a=t.CRH())&&(o.alertHost=a.first)}},decls:5,vars:2,consts:[[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],["style","text-align:center",4,"ngIf"],["appPlaceholder",""],[3,"formGroup","ngSubmit",4,"ngIf"],[2,"text-align","center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","autocomplete","email","name","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","autocomplete","current-password","name","password","formControlName","senha",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,g,2,0,"div",2),t.YNc(3,v,0,0,"ng-template",3),t.YNc(4,b,15,4,"form",4),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngIf",o.isLoading),t.xp6(2),t.Q6J("ngIf",!o.isLoading))},directives:[h.O5,u,f,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],encapsulation:2}),e})()}];let _=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(C)],l.Bz]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.m,_]]}),e})()}}]);